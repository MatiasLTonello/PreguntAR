<script>
    document.title = `Perfil`;
</script>
<div class="container mx-auto p-4 max-w-5xl">
    {{#miUser}}
        <!-- Card principal -->
        <div class="card bg-gray-200 shadow-xl text-black">
            <!-- Header con gradiente -->
            <div class="card-body bg-gradient-to-r from-primary to-secondary text-primary-content rounded-t-2xl">
                <h2 class="card-title text-3xl font-bold justify-center">Perfil de {{usuario}}</h2>
            </div>

            <div class="card-body">
                <div class="flex flex-col lg:flex-row gap-8">
                    <!-- Columna izquierda: Foto y QR -->
                    <div class="flex flex-col items-center lg:w-1/3 gap-4">
                        <!-- Avatar con borde -->
                        <div class="avatar online">
                            <div class="w-40 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2">
                                <img src="/path/to/images/{{foto}}"
                                     onerror="this.onerror=null;this.src='../public/img/default-profile.png';" />
                            </div>
                        </div>

                        <!-- QR Code con marco decorativo -->
                        <div class="card bg-base-200 shadow-md">
                            <div class="card-body p-4">
                                <img src="../public/qr.php?id={{id}}"
                                alt="QR Code"
                                class="w-32 h-32">
                            </div>
                        </div>
                    </div>

                    <!-- Columna derecha: Información -->
                    <div class="lg:w-2/3">

                        <!-- Información Personal -->
                        <div class="card bg-base-200">
                            <div class="card-body">
                                <h3 class="card-title text-xl mb-4 text-gray-800">Información Personal</h3>

                                <div class="grid gap-4">
                                    <div class="stats shadow">
                                        <div class="stat">
                                            <div class="stat-title">Rol</div>
                                            <div class="stat-value text-lg">{{rol}}</div>
                                        </div>
                                    </div>

                                    <div class="stats shadow">
                                        <div class="stat">
                                            <div class="stat-title">Nombre Completo</div>
                                            <div class="stat-value text-lg">{{nombre_completo}}</div>
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="stats shadow">
                                            <div class="stat">
                                                <div class="stat-title">Email</div>
                                                <div class="stat-value text-lg">{{email}}</div>
                                            </div>
                                        </div>

                                        <div class="stats shadow">
                                            <div class="stat">
                                                <div class="stat-title">Fecha de Nacimiento</div>
                                                <div class="stat-value text-lg">{{fecha_nacimiento}}</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="stats shadow">
                                            <div class="stat">
                                                <div class="stat-title">Sexo</div>
                                                <div class="stat-value text-lg">{{sexo}}</div>
                                            </div>
                                        </div>

                                        <div class="stats shadow">
                                            <div class="stat">
                                                <div class="stat-title">Fecha de Registro</div>
                                                <div class="stat-value text-lg">{{fecha_registro}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Estadísticas -->
                        {{#stats}}
                            <div class="card bg-base-200 mt-4">
                                <div class="card-body">
                                    <h3 class="card-title text-xl mb-4 text-white">Estadísticas de Juego</h3>
                                    <div class="stats stats-vertical lg:stats-horizontal shadow">
                                        <div class="stat">
                                            <div class="stat-title">Total Partidas</div>
                                            <div class="stat-value">{{total_partidas}}</div>
                                        </div>

                                        <div class="stat">
                                            <div class="stat-title">Puntaje Máximo</div>
                                            <div class="stat-value text-primary">{{puntaje_maximo}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {{/stats}}
                        {{^stats}}
                            <div class="alert alert-info mt-4">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <span>Juega para ver tu puntaje máximo y partidas totales.</span>
                            </div>
                        {{/stats}}

                        <!-- Mapa -->
                        <div class="card bg-base-200 mt-4">
                            <div class="card-body">
                                <h3 class="card-title text-xl mb-4 text-gray-800">Ubicación</h3>
                                <div class="stats shadow mb-4">
                                    <div class="stat">
                                        <div class="stat-title">Ubicación Actual</div>
                                        <div class="stat-value text-lg">{{ubicacion}}</div>
                                    </div>
                                </div>
                                <div class="w-full rounded-lg overflow-hidden">
                                    <iframe width="100%"
                                            height="300"
                                            style="border:0;"
                                            loading="lazy"
                                            allowfullscreen
                                            referrerpolicy="no-referrer-when-downgrade"
                                            src="https://www.google.com/maps/embed/v1/place?key=AIzaSyAxP6xiQEPFAMcksSmK-ZmzUdGZbo5rukI&q={{ubicacion}}">
                                    </iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {{/miUser}}

    {{#otroPerfil}}
        <div class="card bg-gray-200 shadow-xl text-black">
            <!-- Header con gradiente -->
            <div class="card-body bg-gradient-to-r from-primary to-secondary text-primary-content rounded-t-2xl">
                <h2 class="card-title text-3xl font-bold justify-center">Perfil de {{usuario}}</h2>
            </div>

            <div class="card-body">
                <div class="flex flex-col lg:flex-row gap-8">
                    <!-- Columna izquierda: Foto y QR -->
                    <div class="flex flex-col items-center lg:w-1/3 gap-4">
                        <!-- Avatar con borde -->
                        <div class="avatar online">
                            <div class="w-40 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2">
                                <img src="/path/to/images/{{foto}}"
                                     onerror="this.onerror=null;this.src='../public/img/default-profile.png';" />
                            </div>
                        </div>

                        <!-- QR Code con marco decorativo -->
                        <div class="card bg-base-200 shadow-md">
                            <div class="card-body p-4">
                                <img src="../public/qr.php?id={{id}}"
                                alt="QR Code"
                                class="w-32 h-32">
                            </div>
                        </div>
                    </div>

                    <!-- Columna derecha: Información -->
                    <div class="lg:w-2/3">

                        <!-- Información Personal -->
                        <div class="card bg-base-200">
                            <div class="card-body">
                                <h3 class="card-title text-xl mb-4">Información Personal</h3>

                                <div class="grid gap-4">
                                    <div class="stats shadow">
                                        <div class="stat">
                                            <div class="stat-title">Nombre Completo</div>
                                            <div class="stat-value text-lg">{{nombre_completo}}</div>
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="stats shadow">
                                            <div class="stat">
                                                <div class="stat-title">Email</div>
                                                <div class="stat-value text-lg">{{email}}</div>
                                            </div>
                                        </div>

                                        <div class="stats shadow">
                                            <div class="stat">
                                                <div class="stat-title">Fecha de Nacimiento</div>
                                                <div class="stat-value text-lg">{{fecha_nacimiento}}</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="stats shadow">
                                            <div class="stat">
                                                <div class="stat-title">Sexo</div>
                                                <div class="stat-value text-lg">{{sexo}}</div>
                                            </div>
                                        </div>

                                        <div class="stats shadow">
                                            <div class="stat">
                                                <div class="stat-title">Fecha de Registro</div>
                                                <div class="stat-value text-lg">{{fecha_registro}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Estadísticas -->
                        {{#stats}}
                            <div class="card bg-base-200 mt-4">
                                <div class="card-body">
                                    <h3 class="card-title text-xl mb-4">Estadísticas de Juego</h3>
                                    <div class="stats stats-vertical lg:stats-horizontal shadow">
                                        <div class="stat">
                                            <div class="stat-title">Total Partidas</div>
                                            <div class="stat-value">{{total_partidas}}</div>
                                        </div>

                                        <div class="stat">
                                            <div class="stat-title">Puntaje Máximo</div>
                                            <div class="stat-value text-primary">{{puntaje_maximo}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {{/stats}}
                        {{^stats}}
                            <div class="alert alert-info mt-4">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <span>Juega para ver tu puntaje máximo y partidas totales.</span>
                            </div>
                        {{/stats}}

                        <!-- Mapa -->
                        <div class="card bg-base-200 mt-4">
                            <div class="card-body">
                                <h3 class="card-title text-xl mb-4">Ubicación</h3>
                                <div class="stats shadow mb-4">
                                    <div class="stat">
                                        <div class="stat-title">Ubicación Actual</div>
                                        <div class="stat-value text-lg">{{ubicacion}}</div>
                                    </div>
                                </div>
                                <div class="w-full rounded-lg overflow-hidden">
                                    <iframe width="100%"
                                            height="300"
                                            style="border:0;"
                                            loading="lazy"
                                            allowfullscreen
                                            referrerpolicy="no-referrer-when-downgrade"
                                            src="https://www.google.com/maps/embed/v1/place?key=AIzaSyAxP6xiQEPFAMcksSmK-ZmzUdGZbo5rukI&q={{ubicacion}}">
                                    </iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    {{/otroPerfil}}
</div>